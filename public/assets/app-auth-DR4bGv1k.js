var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,n=(s,t,r)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,i=(e,s)=>{for(var t in s||(s={}))a.call(s,t)&&n(e,t,s[t]);if(r)for(var t of r(s))o.call(s,t)&&n(e,t,s[t]);return e},l=(e,r)=>s(e,t(r)),c=(e,s,t)=>new Promise(((r,a)=>{var o=e=>{try{i(t.next(e))}catch(s){a(s)}},n=e=>{try{i(t.throw(e))}catch(s){a(s)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,n);i((t=t.apply(e,s)).next())}));import{r as d,u as m,j as u,F as p,a as h,b as w,L as x,H as j,c as g,d as y,e as f,f as b,G as v,g as k,h as z,i as N,k as S,l as E}from"./vendor-react-CVKT5PXA.js";import{P,C as M,S as I,F as A,E as _,a as L,B as C,b as T,c as O}from"./app-components-B1qs93R8.js";import{P as H,T as W,M as R,C as B,a as G,S as $,b as J,W as U,G as Z,A as q,z as F,t as D}from"./vendor-other-Cmrf_kQ2.js";import{m as V,A as X}from"./vendor-framer-motion-Cn2BOc_r.js";const Y={},K=function(e,s,t){let r=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),t=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));r=Promise.allSettled(s.map((e=>{if((e=function(e){return"/"+e}(e))in Y)return;Y[e]=!0;const s=e.endsWith(".css"),r=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const a=document.createElement("link");return a.rel=s?"stylesheet":"modulepreload",s||(a.as="script"),a.crossOrigin="",a.href=e,t&&a.setAttribute("nonce",t),document.head.appendChild(a),s?new Promise(((s,t)=>{a.addEventListener("load",s),a.addEventListener("error",(()=>t(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}function a(e){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=e,window.dispatchEvent(s),!s.defaultPrevented)throw e}return r.then((s=>{for(const e of s||[])"rejected"===e.status&&a(e.reason);return e().catch(a)}))},Q="https://codelinesjs.pl/api/",ee={request(e){return c(this,arguments,(function*(e,s={}){try{const{method:r="GET",headers:a={},body:o,requiresAuth:n=!1}=s,l=`${Q.replace("www.","")}${e}`,c=i({"Content-Type":"application/json",Accept:"application/json"},a);if(n){const e=localStorage.getItem("token")||sessionStorage.getItem("token");e&&(c.Authorization=`Bearer ${e}`)}const d={method:r,headers:c,mode:"cors"};o&&(d.body=JSON.stringify(o));const m=yield fetch(l,d);let u=null,p=null;try{const e=yield m.text();e&&(u=JSON.parse(e))}catch(t){p="Nieprawidłowa odpowiedź serwera"}return m.ok||(p=(null==u?void 0:u.message)||(null==u?void 0:u.error)||`Błąd ${m.status}: ${m.statusText}`,u=null),{data:u,error:p,status:m.status}}catch(t){return{data:null,error:t instanceof Error?t.message:"Nieznany błąd zapytania",status:0}}}))},get(e){return c(this,arguments,(function*(e,s={}){return this.request(e,l(i({},s),{method:"GET"}))}))},post(e,s){return c(this,arguments,(function*(e,s,t={}){return this.request(e,l(i({},t),{method:"POST",body:s}))}))},put(e,s){return c(this,arguments,(function*(e,s,t={}){return this.request(e,l(i({},t),{method:"PUT",body:s}))}))},delete(e){return c(this,arguments,(function*(e,s={}){return this.request(e,l(i({},s),{method:"DELETE"}))}))},patch(e,s){return c(this,arguments,(function*(e,s,t={}){return this.request(e,l(i({},t),{method:"PATCH",body:s}))}))}},se=e=>{const s=(e=>{const s=m(),{setLoading:t,setError:r,setIsAuthenticated:a,setUser:o}=e;return(e,n,i=!1)=>c(void 0,null,(function*(){try{t(!0),r(null);const l=yield ee.post("auth/login",{email:e,password:n,rememberMe:i});if(l.error)throw new Error(l.error);if(!l.data)throw new Error("Nieznany błąd logowania. Spróbuj ponownie później.");const{token:c,user:d}=l.data;i?localStorage.setItem("token",c):sessionStorage.setItem("token",c),o&&d&&o(d),a(!0),s("/dashboard")}catch(l){r(l instanceof Error?l.message:"Wystąpił błąd podczas logowania"),a(!1)}finally{t(!1)}}))})(e),t=(e=>{const s=m(),{setLoading:t,setError:r,setIsAuthenticated:a,setUser:o}=e;return(e,n,i)=>c(void 0,null,(function*(){try{t(!0),r(null);const l=yield ee.post("auth/register",{email:e,password:n,username:i});if(l.error)throw new Error(l.error);if(!l.data)throw new Error("Nieznany błąd rejestracji. Spróbuj ponownie później.");const{token:c,user:d}=l.data;sessionStorage.setItem("token",c),o&&d&&o(d),a(!0),s("/dashboard")}catch(l){r(l instanceof Error?l.message:"Wystąpił błąd podczas rejestracji"),a(!1)}finally{t(!1)}}))})(e),r=(e=>{const{setLoading:s,setError:t}=e;return e=>c(void 0,null,(function*(){var r;try{s(!0),t(null);const a=yield ee.post("auth/forgot-password",{email:e});if(a.error)throw new Error(a.error);return(null==(r=a.data)?void 0:r.message)||"Link do resetowania hasła został wysłany na Twój adres email."}catch(a){if(a instanceof Error)throw t(a.message),a;{const e="Wystąpił błąd podczas wysyłania linku resetującego hasło";throw t(e),new Error(e)}}finally{s(!1)}}))})(e),a=(e=>{const s=m(),{setIsAuthenticated:t,setUser:r}=e;return()=>{localStorage.removeItem("token"),sessionStorage.removeItem("token"),t(!1),r(null),s("/")}})(e),o=(e=>{const s=m(),{setLoading:t,setError:r,setIsAuthenticated:a,setUser:o}=e;return(e,n=!1)=>c(void 0,null,(function*(){try{if(t(!0),r(null),!e.credential)return r("Nie udało się uzyskać tokenu uwierzytelniającego z Google. Spróbuj ponownie."),void a(!1);const i=yield ee.post("auth/google-login",{credential:e.credential,rememberMe:n});if(i.error)throw new Error(i.error);if(!i.data)throw new Error("Nieznany błąd logowania przez Google. Spróbuj ponownie później.");const{token:l,user:c}=i.data;n?localStorage.setItem("token",l):sessionStorage.setItem("token",l),o&&c&&o(c),a(!0),s("/dashboard")}catch(i){r(i instanceof Error?i.message:"Wystąpił błąd podczas logowania przez Google"),a(!1)}finally{t(!1)}}))})(e),n=(e=>{const s=m(),{setLoading:t,setError:r}=e;return(e,a,o)=>c(void 0,null,(function*(){var n;try{if(!e||e.length<10)throw new Error("Nieprawidłowy token resetowania hasła. Sprawdź, czy link jest poprawny.");if(a!==o)throw new Error("Hasła nie są identyczne. Upewnij się, że oba pola zawierają to samo hasło.");t(!0),r(null);const i=yield ee.post("auth/reset-password",{token:e,password:a,confirmPassword:o});if(i.error)throw new Error(i.error);return setTimeout((()=>{s("/logowanie")}),3e3),(null==(n=i.data)?void 0:n.message)||"Hasło zostało pomyślnie zmienione. Za chwilę zostaniesz przekierowany do strony logowania."}catch(i){if(i instanceof Error)throw r(i.message),i;{const e="Wystąpił nieznany błąd podczas resetowania hasła";throw r(e),new Error(e)}}finally{t(!1)}}))})(e);return{login:s,register:t,forgotPassword:r,logout:a,loginWithGoogle:o,resetPassword:n}},te=()=>{const e=(()=>{const[e,s]=d.useState(!1),[t,r]=d.useState(null),[a,o]=d.useState(!1),[n,i]=d.useState(!0),[l,c]=d.useState(null);return{loading:e,setLoading:s,error:t,setError:r,isAuthenticated:a,setIsAuthenticated:o,isLoading:n,setIsLoading:i,user:l,setUser:c}})(),s=se(e),t=m(),[r,a]=d.useState(!0);d.useEffect((()=>{c(void 0,null,(function*(){try{a(!0);const t=localStorage.getItem("token")||sessionStorage.getItem("token");if(!t)return void e.setIsAuthenticated(!1);const r=Q.replace("www.",""),o=yield fetch(`${r}auth/verify`,{method:"GET",headers:{Authorization:`Bearer ${t}`,Accept:"application/json"},mode:"cors"});if(429===o.status)throw new Error("Zbyt wiele prób weryfikacji. Spróbuj ponownie za chwilę.");let n;try{const e=yield o.text();if(!e)throw new Error("Pusta odpowiedź serwera");n=JSON.parse(e)}catch(s){throw new Error("Nieprawidłowa odpowiedź serwera")}if(!o.ok)throw new Error(n.error||"Nieznany błąd weryfikacji tokenu");e.setUser(n.user),e.setIsAuthenticated(!0)}catch(t){e.setError(t instanceof Error?t.message:"Wystąpił błąd podczas weryfikacji tokenu"),e.setIsAuthenticated(!1),localStorage.removeItem("token"),sessionStorage.removeItem("token")}finally{a(!1)}}))}),[]);return l(i({},e),{isAuthChecking:r,logout:()=>{localStorage.removeItem("token"),sessionStorage.removeItem("token"),e.setIsAuthenticated(!1),e.setUser(null),t("/")},login:s.login,register:s.register,loginWithGoogle:s.loginWithGoogle,forgotPassword:s.forgotPassword,resetPassword:s.resetPassword,token:localStorage.getItem("token")||sessionStorage.getItem("token")})},re=()=>{const e=d.useRef(null),s=(e=>{const s=d.useRef(null),t=d.useRef({x:0,y:0}),r=d.useRef(),a=d.useMemo((()=>100),[]),o=d.useMemo((()=>[new H("#f7df1e",2),new H("#f7df1e",2),new H("#f7df1e",2)]),[]),n=d.useCallback((()=>{const e=new W(.5,0),s=new R({color:new B("#f7df1e").multiplyScalar(.5),emissive:new B("#f7df1e").multiplyScalar(.3),emissiveIntensity:.5,transparent:!0,opacity:.8,shininess:90});return new G(e,s)}),[]),i=d.useCallback((s=>{var r;const a=null==(r=e.current)?void 0:r.getBoundingClientRect();a&&(t.current={x:(s.clientX-a.left)/a.width*2-1,y:-(s.clientY-a.top)/a.height*2+1})}),[]),l=d.useCallback(((s,t)=>{if(!e.current)return;const{width:r,height:a}=e.current.getBoundingClientRect();s.setSize(r,a),t.aspect=r/a,t.updateProjectionMatrix()}),[]);return d.useEffect((()=>{if(!s.current||!e.current)return;const c=new $,d=new J(75,1,.1,1e3),m=new U({canvas:s.current,alpha:!0,antialias:!0,powerPreference:"high-performance"});m.setClearColor(0,0);const u=new Z,p=[];for(let e=0;e<a;e++){const e=n();e.position.set(50*(Math.random()-.5),50*(Math.random()-.5),50*(Math.random()-.5)),e.rotation.set(Math.random()*Math.PI,Math.random()*Math.PI,Math.random()*Math.PI),p.push(e),u.add(e)}c.add(u),o.forEach(((e,s)=>{e.position.set(30*Math.cos(s*Math.PI*2/3),30*Math.sin(s*Math.PI*2/3),15),c.add(e)})),c.add(new q("#ffffff",.5)),d.position.z=30;const h=()=>{r.current=requestAnimationFrame(h),p.forEach(((e,s)=>{const t=.001*Date.now()+s;e.position.y+=.02*Math.sin(.5*t),e.rotation.x+=.01,e.rotation.y+=.01,e.rotation.z+=.01})),u.rotation.y+=.001,u.rotation.x=.2*t.current.y,u.rotation.z=.2*t.current.x,m.render(c,d)},w=()=>l(m,d);return window.addEventListener("mousemove",i),window.addEventListener("resize",w),w(),h(),()=>{r.current&&cancelAnimationFrame(r.current),window.removeEventListener("mousemove",i),window.removeEventListener("resize",w),m.dispose(),c.clear()}}),[a,o,n,i,l]),s})(e);return u.jsxs(u.Fragment,{children:[u.jsx(V.div,{ref:e,initial:{opacity:0},animate:{opacity:.3},className:"absolute inset-0 pointer-events-none",children:u.jsx("canvas",{ref:s,className:"w-full h-full"})}),u.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[u.jsx("div",{className:"absolute -top-20 -left-20 w-96 h-96 bg-[#f7df1e]/10 rounded-full blur-3xl"}),u.jsx("div",{className:"absolute -bottom-40 -right-20 w-[30rem] h-[30rem] bg-[#f7df1e]/5 rounded-full blur-3xl"}),u.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[40rem] h-[40rem] bg-[#1a1a1a]/50 rounded-full blur-3xl"}),u.jsx("div",{className:"absolute inset-0 bg-[url('/grid-pattern.svg')] bg-center opacity-5"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#1a1a1a]/0 via-[#1a1a1a]/0 to-[#1a1a1a]/80"})]})]})},ae=()=>u.jsx("div",{className:"hidden md:block",children:u.jsx(P,{position:"left",title:"CodeLinesJS App",className:"transform scale-90"})}),oe=({text:e})=>u.jsx("div",{className:"flex items-center justify-center md:justify-start bg-[#f7df1e]/10 rounded-lg p-3",children:u.jsxs("span",{className:"text-[#f7df1e] font-medium",children:["✓ ",e]})}),ne=()=>u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsx(oe,{text:"Interaktywne lekcje"}),u.jsx(oe,{text:"Wyzwania i gry"}),u.jsx(oe,{text:"Śledzenie postępów"}),u.jsx(oe,{text:"Społeczność"})]}),ie=()=>u.jsxs("div",{className:"text-center md:text-left max-w-xl",children:[u.jsxs("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-white mb-6",children:["Odkryj ",u.jsx("span",{className:"text-[#f7df1e]",children:"JavaScript"})," w nowy sposób"]}),u.jsx("p",{className:"text-lg md:text-xl text-gray-300 mb-8",children:"Ucz się, programuj i baw się jednocześnie. Nasza platforma łączy teorię z praktyką, oferując interaktywne lekcje, wyzwania i gry."}),u.jsx(ne,{})]}),le=()=>u.jsxs(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"w-full md:w-3/5 flex flex-col md:flex-row items-center gap-6 md:gap-12 pr-0 md:pr-8",children:[u.jsx(ae,{}),u.jsx(ie,{})]}),ce=({activeTab:e,onTabChange:s})=>u.jsxs("div",{className:"flex items-center justify-center gap-4 mb-8",children:[u.jsx(de,{isActive:"login"===e,onClick:()=>s("login"),icon:u.jsx(p,{}),label:"Logowanie"}),u.jsx(de,{isActive:"register"===e,onClick:()=>s("register"),icon:u.jsx(h,{}),label:"Rejestracja"}),u.jsx(de,{isActive:"forgot"===e,onClick:()=>s("forgot"),icon:u.jsx(w,{}),label:"Reset hasła"})]}),de=({isActive:e,onClick:s,icon:t,label:r})=>u.jsxs(V.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:s,className:"flex flex-col items-center gap-2 p-3 rounded-lg transition-colors "+(e?"bg-js/20 text-js":"text-gray-400 hover:text-js"),children:[t,u.jsx("span",{className:"text-sm font-medium",children:r})]}),me=d.lazy((()=>K((()=>Promise.resolve().then((()=>Ie))),void 0))),ue=d.lazy((()=>K((()=>Promise.resolve().then((()=>_e))),void 0))),pe=d.lazy((()=>K((()=>Promise.resolve().then((()=>Le))),void 0))),he=()=>{const[e,s]=d.useState("login");return u.jsxs(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md bg-dark/30 backdrop-blur-xl rounded-2xl p-8 border border-js/20 shadow-xl shadow-black/20",role:"main","aria-label":"Formularz autoryzacji",children:[u.jsxs("div",{className:"flex flex-col justify-center items-center mb-6",children:[u.jsx("span",{className:"block text-2xl bg-[#f7df1e] text-black px-2 py-1 rounded",children:"JS"}),u.jsx("h2",{className:"mt-2 text-xl font-bold text-js",children:"CodeLinesJS"})]}),u.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-center text-js mb-6",children:["login"===e&&"Zaloguj się","register"===e&&"Dołącz do nas","forgot"===e&&"Odzyskaj hasło"]}),u.jsx(ce,{activeTab:e,onTabChange:s}),u.jsx(d.Suspense,{fallback:u.jsx("div",{className:"text-center py-4",children:"Ładowanie..."}),children:u.jsxs(X,{mode:"wait",children:["login"===e&&u.jsx(me,{},"login"),"register"===e&&u.jsx(ue,{},"register"),"forgot"===e&&u.jsx(pe,{},"forgot")]})}),u.jsx("div",{className:"mt-6 text-center text-sm text-gray-400",children:u.jsxs("p",{children:["Logując się, akceptujesz ",u.jsx(x,{to:"/polityka-prywatnosci",className:"text-js hover:underline",children:"Politykę Prywatności"}),"."]})})]})},we=({children:e,title:s,subtitle:t})=>u.jsxs("div",{className:"w-full md:w-2/5 flex justify-center md:justify-end relative mt-12 md:mt-0",children:[u.jsx("div",{className:"absolute -z-10 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-[#f7df1e]/10 rounded-full blur-3xl"}),e?u.jsxs("div",{className:"w-full max-w-md bg-dark/30 backdrop-blur-xl rounded-2xl p-8 border border-js/20",children:[u.jsxs("div",{className:"flex flex-col justify-center items-center mb-8",children:[u.jsx("span",{className:"block text-2xl bg-[#f7df1e] text-black px-2 py-1 rounded",children:"JS"}),u.jsx("h2",{className:"mt-2 text-xl font-bold text-js",children:"CodeLinesJS"})]}),s&&u.jsx("h1",{className:"text-3xl font-bold text-center text-js mb-4",children:s}),t&&u.jsx("p",{className:"text-center text-gray-400 mb-8",children:t}),e]}):u.jsx(he,{})]}),xe=({children:e,title:s,subtitle:t}={})=>u.jsxs("main",{className:"min-h-screen w-full relative bg-gradient-to-b from-[#1a1a1a] via-[#242424] to-[#1a1a1a] flex items-center justify-center py-16 overflow-hidden",children:[u.jsxs(j,{children:[u.jsx("title",{children:" Logowanie | CodeLinesJS"}),u.jsx("meta",{name:"description",content:"Logowanie do platformy CodeLinesJS - dołącz do nas i rozwijaj swoje umiejętności w przyjaznym środowisku."})]}),u.jsx(M,{className:"relative z-10",children:u.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-8 md:gap-20 w-full max-w-7xl mx-auto",children:[u.jsx(le,{}),u.jsx(we,{children:e,title:s,subtitle:t})]})}),u.jsx(re,{})]}),je=()=>{const[e,s]=d.useState(!1);return{isVisible:e,toggleVisibility:()=>s((e=>!e)),inputType:e?"text":"password"}},ge=({errorMessage:e})=>u.jsxs(V.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[u.jsxs("div",{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400 text-sm flex items-start",children:[u.jsx(g,{className:"mr-2 mt-0.5 flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold mb-1",children:"Błąd tokenu resetowania hasła"}),u.jsx("p",{children:e||"Nieprawidłowy lub wygasły token resetowania hasła. Sprawdź, czy link jest poprawny lub spróbuj ponownie zresetować hasło."})]})]}),u.jsxs("div",{className:"text-center mt-6",children:[u.jsx("p",{className:"text-gray-400 mb-4",children:"Możesz spróbować ponownie zresetować hasło:"}),u.jsx(x,{to:"/logowanie",className:"text-js hover:underline",children:"Wróć do strony logowania"})]})]}),ye=({message:e})=>e?u.jsxs(u.Fragment,{children:[u.jsx(I,{message:e,title:"Hasło zostało zmienione"}),u.jsxs("div",{className:"text-center mt-4",children:[u.jsx("p",{className:"text-gray-400 mb-2",children:"Za chwilę zostaniesz przekierowany do strony logowania."}),u.jsx(x,{to:"/logowanie",className:"text-js hover:underline",children:"Przejdź do logowania"})]})]}):null,fe=F.object({email:F.string().min(1,"Email jest wymagany").email("Nieprawidłowy format email"),password:F.string().min(1,"Hasło jest wymagane"),rememberMe:F.boolean().optional()}),be=F.object({username:F.string().min(3,"Nazwa użytkownika musi mieć minimum 3 znaki").max(20,"Nazwa użytkownika nie może przekraczać 20 znaków").regex(/^[a-zA-Z0-9_]+$/,"Nazwa użytkownika może zawierać tylko litery, cyfry i podkreślenia"),email:F.string().email("Nieprawidłowy format adresu email"),password:F.string().min(8,"Hasło musi mieć minimum 8 znaków").regex(/[A-Z]/,"Hasło musi zawierać przynajmniej jedną wielką literę").regex(/[a-z]/,"Hasło musi zawierać przynajmniej jedną małą literę").regex(/[0-9]/,"Hasło musi zawierać przynajmniej jedną cyfrę"),confirmPassword:F.string(),acceptPrivacy:F.boolean().refine((e=>!0===e),{message:"Musisz zaakceptować politykę prywatności"})}).refine((e=>e.password===e.confirmPassword),{message:"Hasła muszą być identyczne",path:["confirmPassword"]}),ve=F.object({email:F.string().min(1,"Email jest wymagany").email("Nieprawidłowy format email")}),ke=F.object({password:F.string().min(8,"Hasło musi mieć minimum 8 znaków").regex(/[A-Z]/,"Hasło musi zawierać przynajmniej jedną wielką literę").regex(/[a-z]/,"Hasło musi zawierać przynajmniej jedną małą literę").regex(/[0-9]/,"Hasło musi zawierać przynajmniej jedną cyfrę"),confirmPassword:F.string()}).refine((e=>e.password===e.confirmPassword),{message:"Hasła muszą być identyczne",path:["confirmPassword"]}),ze=({initialError:e=null}={})=>{const[s,t]=d.useState(null),[r,a]=d.useState(e);d.useEffect((()=>{null!=e&&a(e)}),[e]);const o=e=>{a(e),t(null)};return{successMessage:s,errorMessage:r,setSuccess:e=>{t(e),a(null)},setError:o,handleError:e=>{let s="";return s=e instanceof Error?e.message:"string"==typeof e?e:"Wystąpił nieznany błąd. Spróbuj ponownie później.",o(s),s},resetStatus:()=>{t(null),a(null)},hasSuccess:!!s,hasError:!!r}},Ne=()=>{var e,s;const{register:t,errors:r,loading:a,handleSubmit:o,errorMessage:n,successMessage:l,tokenError:m}=(()=>{const{token:e}=y(),{resetPassword:s,loading:t,error:r}=te(),a=ze({initialError:r}),[o,n]=d.useState(!1),{register:l,handleSubmit:m,formState:{errors:u},reset:p}=f({resolver:D(ke),mode:"onSubmit"});return d.useEffect((()=>{e?e.length<10&&(n(!0),a.setError("Token resetowania hasła jest nieprawidłowy. Sprawdź, czy link jest poprawny.")):(n(!0),a.setError("Brak tokenu resetowania hasła. Sprawdź, czy link jest poprawny."))}),[e,a]),i({register:l,errors:u,loading:t,tokenError:o,handleSubmit:m((t=>c(void 0,null,(function*(){if(e)try{a.resetStatus();const r=yield s(e,t.password,t.confirmPassword);a.setSuccess(r),p()}catch(r){const e=a.handleError(r);"string"==typeof e&&(e.includes("token")||e.includes("Token")||e.includes("wygasł"))&&n(!0)}else a.setError("Brak tokenu resetowania hasła. Sprawdź, czy link jest poprawny.")}))))},a)})();return m?u.jsx(ge,{errorMessage:n}):u.jsxs(A,{onSubmit:o,children:[n&&u.jsx(_,{message:n,title:"Błąd resetowania hasła"}),u.jsx(ye,{message:l}),!l&&u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Wprowadź nowe hasło dla swojego konta. Hasło musi zawierać co najmniej 8 znaków, w tym jedną wielką literę, jedną małą literę i jedną cyfrę."}),u.jsx(L,i({label:"Nowe hasło",error:null==(e=r.password)?void 0:e.message},t("password"))),u.jsx(L,i({label:"Potwierdź nowe hasło",error:null==(s=r.confirmPassword)?void 0:s.message},t("confirmPassword"))),u.jsx(C,{type:"submit",className:"w-full",disabled:a,children:a?"Resetowanie hasła...":"Zresetuj hasło"})]})]})},Se=()=>u.jsxs(V.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[u.jsxs("div",{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400 text-sm flex items-start",children:[u.jsx(g,{className:"mr-2 mt-0.5 flex-shrink-0"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold mb-1",children:"Błąd tokenu resetowania hasła"}),u.jsx("p",{children:"Nieprawidłowy lub wygasły token resetowania hasła. Sprawdź, czy link jest poprawny lub spróbuj ponownie zresetować hasło."})]})]}),u.jsxs("div",{className:"text-center mt-6",children:[u.jsx("p",{className:"text-gray-400 mb-4",children:"Możesz spróbować ponownie zresetować hasło na stronie logowania:"}),u.jsxs(x,{to:"/logowanie",className:"inline-flex items-center text-js hover:underline",children:[u.jsx(b,{className:"mr-2"})," Wróć do strony logowania"]})]})]}),Ee=Object.freeze(Object.defineProperty({__proto__:null,ResetPasswordPage:()=>{const{token:e}=y();return e?u.jsx(xe,{title:"Resetowanie hasła",subtitle:"Wprowadź nowe hasło dla swojego konta",children:u.jsx(Ne,{})}):u.jsx(xe,{title:"Nieprawidłowy link",subtitle:"Link do resetowania hasła jest nieprawidłowy lub wygasł.",children:u.jsx(Se,{})})}},Symbol.toStringTag,{value:"Module"})),Pe=d.memo((({rememberMe:e})=>{const{loginWithGoogle:s}=te(),[t,r]=d.useState(null);return u.jsxs(u.Fragment,{children:[t&&u.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-500/10 border border-red-500/20 text-red-400 text-sm",children:t}),u.jsx("div",{className:"flex flex-col items-center",children:u.jsx(v,{onSuccess:t=>{s(t,e)},onError:()=>{r("Logowanie przez Google nie powiodło się. Spróbuj ponownie później.")},theme:"filled_black",shape:"pill",text:"continue_with",locale:"pl",useOneTap:!1,context:"signin",type:"standard",size:"large",width:"100%"})})]})}));Pe.displayName="GoogleLoginButton";const Me=d.memo((({register:e})=>u.jsx("div",{className:"flex items-center",children:u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[u.jsxs("div",{className:"relative",children:[u.jsx("input",i({type:"checkbox",className:"peer sr-only"},e("rememberMe"))),u.jsx("div",{className:"w-4 h-4 border border-js/30 rounded bg-dark/70 peer-checked:bg-js peer-checked:border-js transition-colors"}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-black scale-0 peer-checked:scale-100 transition-transform",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),u.jsx("span",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Zapamiętaj mnie"})]})})));Me.displayName="RememberMeCheckbox";const Ie=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{var e,s;const{login:t,loading:r,error:a}=te(),{register:o,handleSubmit:n,formState:{errors:m},watch:p}=f({resolver:D(fe),mode:"onSubmit"}),h=p("rememberMe",!1)||!1,[w,x]=d.useState(!1);return u.jsxs(V.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},onSubmit:n((e=>c(void 0,null,(function*(){yield t(e.email,e.password,e.rememberMe)})))),className:"space-y-5",children:[a&&u.jsx(T,{message:a}),u.jsx(O,i({type:"email",label:"Email",placeholder:"twoj@email.com",icon:u.jsx(k,{}),error:null==(e=m.email)?void 0:e.message},o("email"))),u.jsx(O,l(i({type:w?"text":"password",label:"Hasło",placeholder:"••••••••",icon:u.jsx(z,{}),error:null==(s=m.password)?void 0:s.message},o("password")),{rightIcon:u.jsx("button",{type:"button",onClick:()=>x(!w),className:"focus:outline-none text-gray-400 hover:text-js transition-colors",children:w?u.jsx(N,{}):u.jsx(S,{})})})),u.jsx("div",{className:"flex items-center justify-between",children:u.jsx(Me,{register:o})}),u.jsx("div",{className:"pt-2",children:u.jsx(C,{type:"submit",className:"w-full bg-js hover:bg-js/90 text-black font-bold py-3 transition-all transform hover:scale-[1.02] active:scale-[0.98] shadow-lg shadow-js/20",disabled:r,children:r?"Logowanie...":"Zaloguj się"})}),u.jsxs("div",{className:"relative flex items-center justify-center my-4",children:[u.jsx("div",{className:"border-t border-gray-600 w-full"}),u.jsx("span",{className:"bg-dark/50 px-3 text-sm text-gray-400 absolute",children:"lub"})]}),u.jsx(Pe,{rememberMe:h})]})}},Symbol.toStringTag,{value:"Module"})),Ae=d.memo((({register:e,error:s})=>u.jsxs("div",{className:"space-y-1",children:[u.jsxs("label",{className:"flex items-start gap-2 cursor-pointer group",children:[u.jsx("input",i({type:"checkbox",className:`\n          mt-1 w-4 h-4 rounded bg-dark text-js \n          transition-colors duration-200 ease-in-out\n          ${s?"border-red-500 focus:ring-red-500/20":"border-js/20 focus:ring-js/20 hover:border-js/30"}\n        `},e)),u.jsxs("span",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:["Akceptuję"," ",u.jsx(x,{to:"/polityka-prywatnosci",className:"text-js hover:text-js/80 underline transition-colors",target:"_blank",rel:"noopener noreferrer",children:"politykę prywatności"})]})]}),s&&u.jsx(V.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-sm text-red-400",children:s})]})));Ae.displayName="PrivacyPolicyCheckbox";const _e=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{var e,s,t,r,a;const{register:o,errors:n,loading:l,handleSubmit:d,errorMessage:m}=(()=>{const{register:e,loading:s,error:t}=te(),r=ze({initialError:t}),{register:a,handleSubmit:o,formState:{errors:n}}=f({resolver:D(be),mode:"onChange",defaultValues:{acceptPrivacy:!1}});return i({register:a,errors:n,loading:s,handleSubmit:o((s=>c(void 0,null,(function*(){try{r.resetStatus(),yield e(s.email,s.password,s.username)}catch(t){r.handleError(t)}}))))},r)})();return u.jsxs(A,{onSubmit:d,children:[m&&u.jsx(_,{message:m,title:"Błąd rejestracji"}),u.jsx(O,i({type:"text",label:"Nazwa użytkownika",placeholder:"jankowalski",icon:u.jsx(E,{}),error:null==(e=n.username)?void 0:e.message},o("username"))),u.jsx(O,i({type:"email",label:"Email",placeholder:"twoj@email.com",icon:u.jsx(k,{}),error:null==(s=n.email)?void 0:s.message},o("email"))),u.jsx(L,i({label:"Hasło",error:null==(t=n.password)?void 0:t.message},o("password"))),u.jsx(L,i({label:"Potwierdź hasło",error:null==(r=n.confirmPassword)?void 0:r.message},o("confirmPassword"))),u.jsx(Ae,{register:o("acceptPrivacy"),error:null==(a=n.acceptPrivacy)?void 0:a.message}),u.jsx(C,{type:"submit",className:"w-full",disabled:l,children:l?"Rejestracja...":"Zarejestruj się"})]})}},Symbol.toStringTag,{value:"Module"})),Le=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{var e;const{register:s,errors:t,loading:r,handleSubmit:a,errorMessage:o,successMessage:n}=(()=>{const{forgotPassword:e,loading:s,error:t}=te(),r=ze({initialError:t}),{register:a,handleSubmit:o,reset:n,formState:{errors:l}}=f({resolver:D(ve)});return i({register:a,errors:l,loading:s,handleSubmit:o((s=>c(void 0,null,(function*(){try{r.resetStatus();const t=yield e(s.email);r.setSuccess(t),n()}catch(t){r.handleError(t)}}))))},r)})();return u.jsxs(A,{onSubmit:a,children:[o&&u.jsx(_,{message:o,title:"Błąd resetowania hasła"}),n&&u.jsx(I,{message:n}),!n&&u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Podaj swój adres email, a wyślemy Ci link do zresetowania hasła."}),u.jsx(O,i({type:"email",label:"Email",placeholder:"twoj@email.com",icon:u.jsx(k,{}),error:null==(e=t.email)?void 0:e.message},s("email"))),u.jsx(C,{type:"submit",className:"w-full",disabled:r,children:r?"Wysyłanie...":"Wyślij link resetujący"})]})]})}},Symbol.toStringTag,{value:"Module"}));export{Q as A,K as _,je as a,xe as b,Ee as i,te as u};
